## **üöÄ "GI·∫¢I M√É" T·ªêI ∆ØU H√ìA DATABASE: "B∆†M" D·ªÆ LI·ªÜU NHANH NH∆Ø CH·ªöP CHO D√ÇN CODE üöÄ**

Yo c√°c b·∫°n sinh vi√™n IT! H√¥m nay ch√∫ng ta s·∫Ω c√πng nhau "kh√°m ph√°" m·ªôt ch·ªß ƒë·ªÅ r·∫•t quan tr·ªçng: T·ªëi ∆∞u h√≥a Database. ƒê√¢y l√†
m·ªôt k·ªπ nƒÉng "ƒë·∫Øt gi√°" gi√∫p b·∫°n "c√¢n" m·ªçi b√†i to√°n li√™n quan ƒë·∫øn d·ªØ li·ªáu. C√πng m√¨nh "m·ªï x·∫ª" n√≥ nh√©!

### **I. T·ªêI ∆ØU H√ìA DATABASE L√Ä G√å? (L√ÄM CHO DATABASE "NGON" H∆†N)**

- **T·ªëi ∆∞u h√≥a Database:** L√† qu√° tr√¨nh _c·∫£i thi·ªán_ hi·ªáu su·∫•t c·ªßa c∆° s·ªü d·ªØ li·ªáu, gi√∫p:
    - **Truy v·∫•n nhanh:** L·∫•y d·ªØ li·ªáu nhanh h∆°n.
    - **Gi·∫£m t·∫£i:** Ti·∫øt ki·ªám t√†i nguy√™n (CPU, RAM, ·ªï c·ª©ng).
    - **·ªîn ƒë·ªãnh:** ƒê·∫£m b·∫£o database ho·∫°t ƒë·ªông ·ªïn ƒë·ªãnh, kh√¥ng b·ªã ch·∫≠m, treo.
- **Quan tr·ªçng v√¨:**
    - **T·ªëc ƒë·ªô:** ·ª®ng d·ª•ng ch·∫°y nhanh h∆°n, tr·∫£i nghi·ªám t·ªët h∆°n.
    - **T√†i nguy√™n:** Ti·∫øt ki·ªám chi ph√≠ server.
    - **M·ªü r·ªông:** Gi√∫p ·ª©ng d·ª•ng d·ªÖ d√†ng m·ªü r·ªông khi d·ªØ li·ªáu l·ªõn.

### **II. C√ÅC Y·∫æU T·ªê C·∫¶N T·ªêI ∆ØU (C√ÅI G√å C·∫¶N "L√ÄM M·ªäN")**

1. **Truy v·∫•n (Query):** T·ªëi ∆∞u c√¢u l·ªánh SQL (nh∆∞ `SELECT`, `JOIN`,...).
2. **Ch·ªâ m·ª•c (Index):** T·∫°o index ƒë·ªÉ t√¨m ki·∫øm nhanh.
3. **B·∫£ng (Table):** Thi·∫øt k·∫ø b·∫£ng h·ª£p l√Ω (chu·∫©n h√≥a, kh·ª≠ chu·∫©n h√≥a, ...).
4. **Ph√¢n v√πng (Partitioning):** Chia nh·ªè b·∫£ng khi d·ªØ li·ªáu qu√° l·ªõn.
5. **Caching (B·ªô nh·ªõ ƒë·ªám):** L∆∞u k·∫øt qu·∫£ query th∆∞·ªùng d√πng ƒë·ªÉ l·∫•y nhanh.
6. **Replication/Sharding:** Nh√¢n b·∫£n database ƒë·ªÉ tƒÉng hi·ªáu su·∫•t, ch·ªãu t·∫£i.

### **III. C√ÅC K·ª∏ THU·∫¨T T·ªêI ∆ØU H√ìA (NH·ªÆNG "CHI√äU" L√ÄM DATABASE "NGON" H∆†N)**

1. **T·ªëi ∆∞u h√≥a Truy v·∫•n (Query Optimization):**

    - Ch·ªâ l·∫•y c√°c c·ªôt c·∫ßn thi·∫øt (`SELECT column1, column2,...` thay v√¨ `SELECT *`).
    - D√πng `WHERE` ƒë·ªÉ l·ªçc d·ªØ li·ªáu tr∆∞·ªõc khi l·∫•y (nh∆∞ ƒë√£ n√≥i ·ªü b√†i v·ªÅ WHERE).
    - D√πng `JOIN` thay v√¨ d√πng subquery (truy v·∫•n con) khi c·∫ßn thi·∫øt (b√†i v·ªÅ join).
    - Tr√°nh d√πng `SELECT DISTINCT` n·∫øu kh√¥ng c·∫ßn thi·∫øt.

2. **S·ª≠ D·ª•ng Index (Indexing):**

    - T·∫°o index tr√™n c√°c c·ªôt th∆∞·ªùng d√πng ƒë·ªÉ t√¨m ki·∫øm, s·∫Øp x·∫øp, ...
    - **V√≠ d·ª•:** `CREATE INDEX idx_name ON Employees (LastName)`.
    - **Ch√∫ √Ω:** ƒê·ª´ng t·∫°o qu√° nhi·ªÅu index, l√†m ch·∫≠m c√°c thao t√°c ghi.
        - T·∫°o index cho c√°c c·ªôt th∆∞·ªùng d√πng trong `WHERE`, `JOIN`, `ORDER BY`.

3. **Thi·∫øt k·∫ø B·∫£ng (Table Design):**

    - **Chu·∫©n h√≥a (Normalization):** Chia b·∫£ng nh·ªè h∆°n, tr√°nh tr√πng l·∫∑p d·ªØ li·ªáu (b√†i v·ªÅ chu·∫©n h√≥a database).
    - **Kh·ª≠ chu·∫©n h√≥a (Denormalization):** K·∫øt h·ª£p m·ªôt s·ªë b·∫£ng (tr√°nh JOIN nhi·ªÅu) khi c·∫ßn (v√≠ d·ª• trong data warehouse).
    - Ch·ªçn ki·ªÉu d·ªØ li·ªáu ph√π h·ª£p (nh∆∞ ƒë√£ n√≥i ·ªü b√†i v·ªÅ database).

4. **Ph√¢n V√πng B·∫£ng (Partitioning):**

    - Chia b·∫£ng l·ªõn th√†nh c√°c ph·∫ßn nh·ªè h∆°n (theo th·ªùi gian, v√πng, ...).
    - **V√≠ d·ª•:** Chia b·∫£ng `Orders` theo th√°ng.
    - C√≥ th·ªÉ l√† Horizontal Partitioning v√† Vertical Partitioning.

5. **B·ªô nh·ªõ ƒë·ªám (Caching):**

    - L∆∞u k·∫øt qu·∫£ truy v·∫•n th∆∞·ªùng d√πng v√†o cache (Redis, Memcached) ƒë·ªÉ truy c·∫≠p nhanh h∆°n.
    - **V√≠ d·ª•:** Cache k·∫øt qu·∫£ c√°c truy v·∫•n `SELECT` th∆∞·ªùng d√πng.

6. **Replication & Sharding:**

    - **Replication:** Nh√¢n b·∫£n database ƒë·ªÉ tƒÉng kh·∫£ nƒÉng ch·ªãu t·∫£i.
    - **Sharding:** Chia database th√†nh nhi·ªÅu ph·∫ßn ƒë·ªÉ gi·∫£m t·∫£i cho m·ªôt server.

7. **T·ªëi ∆∞u Full-Text Search:**

    - N·∫øu c·∫ßn t√¨m ki·∫øm to√†n vƒÉn, h√£y d√πng Full-Text Search (thay v√¨ d√πng `LIKE` ho·∫∑c `CONTAINS` ch·∫≠m).

8. **T·ªëi ∆∞u d·ªØ li·ªáu:**
    - D·ªØ li·ªáu ƒë∆∞·ª£c n√©n v√† l∆∞u tr·ªØ d·∫°ng blob ƒë·ªÉ gi·∫£m dung l∆∞·ª£ng.
    - D·ªØ li·ªáu c√≥ ƒë∆∞·ª£c ph√¢n lo·∫°i h·ª£p l√Ω, c√°c d·ªØ li·ªáu hay ƒë∆∞·ª£c truy c·∫≠p n√™n ƒë∆∞·ª£c ƒë·∫∑t g·∫ßn nhau ƒë·ªÉ d·ªÖ t√¨m ki·∫øm

### **IV. V√ç D·ª§ MINH H·ªåA (XEM "TH·ª∞C H√ÄNH")**

1. **T·ªëi ∆∞u query:**

    - **Thay v√¨:**
      ```sql
      SELECT *
      FROM Employees
      WHERE Department = 'Sales';
      ```
    - **H√£y d√πng:**
      ```sql
      SELECT FirstName, LastName, Email, Salary
      FROM Employees
      WHERE Department = 'Sales';
      ```

2. **T·∫°o index:**

```sql
CREATE INDEX idx_department ON Employees (Department);
```

3. **D√πng caching:**
    - **Code v√≠ d·ª• (C#):**

```csharp
using Microsoft.Extensions.Caching.Memory;

public class DataService
{
    private readonly IMemoryCache _memoryCache;
    public DataService(IMemoryCache memoryCache) {
       _memoryCache = memoryCache;
    }

    public string GetData(string key) {
         string cacheEntry;
         if(!_memoryCache.TryGetValue(key, out cacheEntry)) {
            cacheEntry = "Data t·ª´ database"; // gi·∫£ s·ª≠ l·∫•y data t·ª´ db
            var cacheEntryOptions = new MemoryCacheEntryOptions()
                .SetAbsoluteExpiration(TimeSpan.FromSeconds(3));
            _memoryCache.Set(key, cacheEntry, cacheEntryOptions);
          }
      return cacheEntry;
    }
}
```

### **V. L∆ØU √ù QUAN TR·ªåNG (ƒê·ªÇ KH√îNG B·ªä "SAI S√ìT")**

- **Hi·ªÉu r√µ d·ªØ li·ªáu:** Hi·ªÉu r√µ d·ªØ li·ªáu, c√°ch d√πng ƒë·ªÉ ch·ªçn index, c·∫•u tr√∫c,... ph√π h·ª£p.
- **ƒêo ƒë·∫°c:** ƒêo hi·ªáu su·∫•t query ƒë·ªÉ bi·∫øt c√°i n√†o ch·∫≠m, c·∫ßn t·ªëi ∆∞u.
- **C√¢n b·∫±ng:** Ch·ªçn c√°ch t·ªëi ∆∞u ph√π h·ª£p v·ªõi t√¨nh hu·ªëng (ƒë·ª´ng l·∫°m d·ª•ng).
- **T·ªëi ∆∞u t·ª´ t·ª´:** Kh√¥ng c·∫ßn t·ªëi ∆∞u m·ªçi th·ª© ngay, t·ª´ t·ª´ l√†m t·ª´ng b∆∞·ªõc.
- **Theo d√µi v√† b·∫£o tr√¨**: Sau khi t·ªëi ∆∞u, c·∫ßn theo d√µi v√† b·∫£o tr√¨ database th∆∞·ªùng xuy√™n.

### **VI. K·∫æT LU·∫¨N (T·ªîNG K·∫æT)**

T·ªëi ∆∞u h√≥a database l√† m·ªôt qu√° tr√¨nh li√™n t·ª•c, ƒë√≤i h·ªèi s·ª± hi·ªÉu bi·∫øt s√¢u r·ªông v·ªÅ c·∫£ database v√† ·ª©ng d·ª•ng. Hy v·ªçng qua b√†i
vi·∫øt n√†y, c√°c b·∫°n ƒë√£ hi·ªÉu r√µ h∆°n v·ªÅ c√°c k·ªπ thu·∫≠t t·ªëi ∆∞u h√≥a v√† c√≥ th·ªÉ √°p d·ª•ng ch√∫ng v√†o d·ª± √°n c·ªßa m√¨nh. Ch√∫c c√°c b·∫°n
code th√†nh c√¥ng! üòé

## **ğŸš€ "GIáº¢I MÃƒ" INDEX TRONG SQL SERVER: "ÄI Táº®T" CHO CÃ‚U TRUY Váº¤N CHO DÃ‚N CODE ğŸš€**

Yo cÃ¡c báº¡n sinh viÃªn IT! HÃ´m nay chÃºng ta sáº½ cÃ¹ng nhau "khÃ¡m phÃ¡" má»™t khÃ¡i niá»‡m cá»±c ká»³ quan trá»ng trong SQL Server:
Index (Chá»‰ má»¥c). ÄÃ¢y lÃ  má»™t "chiÃªu thá»©c" lá»£i háº¡i giÃºp báº¡n tÄƒng tá»‘c Ä‘á»™ tÃ¬m kiáº¿m dá»¯ liá»‡u trong database, nhÆ° kiá»ƒu báº¡n cÃ³ "
báº£n Ä‘á»“" giÃºp báº¡n Ä‘i Ä‘áº¿n Ä‘Ã­ch nhanh hÆ¡n váº­y. CÃ¹ng mÃ¬nh "má»• xáº»" nÃ³ nhÃ©!

### **I. INDEX LÃ€ GÃŒ? (NHÆ¯ "Báº¢N Äá»’" CHO DATABASE)**

- **Index (Chá»‰ má»¥c):** LÃ  má»™t cáº¥u trÃºc dá»¯ liá»‡u giÃºp SQL Server tÃ¬m kiáº¿m dá»¯ liá»‡u nhanh hÆ¡n trong báº£ng.
- **NÃ³ hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o?**
    - Giá»‘ng nhÆ° khi báº¡n tÃ¬m sÃ¡ch trong thÆ° viá»‡n: báº¡n tra má»¥c lá»¥c (index) Ä‘á»ƒ biáº¿t sÃ¡ch náº±m á»Ÿ Ä‘Ã¢u, thay vÃ¬ tÃ¬m tá»«ng cuá»‘n
      má»™t.
- **Quan trá»ng vÃ¬:**
    - **Tá»‘c Ä‘á»™:** GiÃºp cÃ¢u truy váº¥n (query) cháº¡y nhanh hÆ¡n.
    - **Hiá»‡u quáº£:** Tiáº¿t kiá»‡m tÃ i nguyÃªn (CPU, RAM, ...).
    - **Tráº£i nghiá»‡m:** GiÃºp á»©ng dá»¥ng mÆ°á»£t mÃ , nhanh hÆ¡n.

### **II. CÃC LOáº I INDEX PHá»” BIáº¾N (CÃC LOáº I "Báº¢N Äá»’")**

1. **Clustered Index (Chá»‰ má»¥c nhÃ³m cá»¥m):**
    - Quy Ä‘á»‹nh _thá»© tá»± váº­t lÃ½_ cá»§a dá»¯ liá»‡u trong báº£ng (dá»¯ liá»‡u Ä‘Æ°á»£c sáº¯p xáº¿p theo thá»© tá»± index).
    - Má»—i báº£ng _chá»‰ cÃ³ má»™t_ clustered index.
    - ThÆ°á»ng Ä‘Æ°á»£c táº¡o trÃªn cá»™t khÃ³a chÃ­nh (`Primary Key`).
2. **Nonclustered Index (Chá»‰ má»¥c khÃ´ng nhÃ³m cá»¥m):**
    - KhÃ´ng quy Ä‘á»‹nh thá»© tá»± váº­t lÃ½ cá»§a dá»¯ liá»‡u (nhÆ° index á»Ÿ cuá»‘i sÃ¡ch).
    - Má»—i báº£ng cÃ³ thá»ƒ cÃ³ _nhiá»u_ nonclustered index.
    - DÃ¹ng khi cÃ³ cÃ¡c cá»™t thÆ°á»ng xuyÃªn Ä‘Æ°á»£c tÃ¬m kiáº¿m, lá»c, ...
3. **Composite Index (Chá»‰ má»¥c tá»•ng há»£p):**
    - Index Ä‘Æ°á»£c táº¡o trÃªn _nhiá»u cá»™t_ (giÃºp tÃ¬m kiáº¿m hiá»‡u quáº£ khi cÃ³ nhiá»u Ä‘iá»u kiá»‡n lá»c).
    - **VÃ­ dá»¥:** Index trÃªn `LastName`, `FirstName` giÃºp truy váº¥n nhanh hÆ¡n náº¿u thÆ°á»ng tÃ¬m theo cáº£ há» vÃ  tÃªn.
4. **Unique Index:**
    - Äáº£m báº£o _giÃ¡ trá»‹ duy nháº¥t_ cá»§a cá»™t (vÃ­ dá»¥: email, sá»‘ Ä‘iá»‡n thoáº¡i).
    - CÃ³ thá»ƒ lÃ  clustered hoáº·c nonclustered.
5. **Full-Text Index:**
    - DÃ¹ng cho cÃ¡c cá»™t kiá»ƒu chá»¯ (text, varchar), há»— trá»£ tÃ¬m kiáº¿m toÃ n vÄƒn.

### **III. CÃCH Táº O INDEX (CÃCH "Váº¼ Báº¢N Äá»’")**

```sql
CREATE [UNIQUE] [CLUSTERED | NONCLUSTERED] INDEX index_name
ON table_name (column1 [ASC|DESC], column2 [ASC|DESC], ...);
```

- **`CREATE INDEX index_name`:** Táº¡o index vá»›i tÃªn `index_name`.
- **`ON table_name (column1, column2, ...)`:** Táº¡o index trÃªn cÃ¡c cá»™t `column1`, `column2`, ...
- **`CLUSTERED | NONCLUSTERED`:** Chá»n loáº¡i index (clustered hoáº·c nonclustered).
- **`UNIQUE`:** Táº¡o unique index (Ä‘áº£m báº£o giÃ¡ trá»‹ duy nháº¥t).
- **`ASC|DESC`:** Thá»© tá»± sáº¯p xáº¿p (tÄƒng dáº§n hoáº·c giáº£m dáº§n).

### **IV. VÃ Dá»¤ MINH Há»ŒA (XEM "THá»°C HÃ€NH")**

1. **Táº¡o nonclustered index trÃªn cá»™t `LastName`:**

```sql
CREATE INDEX idx_lastname ON Employees (LastName);
```

2. **Táº¡o composite index trÃªn `LastName` vÃ  `FirstName`:**

```sql
CREATE INDEX idx_fullname ON Employees (LastName, FirstName);
```

3. **Táº¡o unique index trÃªn cá»™t `Email`:**

```sql
CREATE UNIQUE INDEX idx_email ON Employees (Email);
```

### **V. KHI NÃ€O NÃŠN DÃ™NG INDEX (KHI NÃ€O "Cáº¦N Báº¢N Äá»’")**

1. **Khi tÃ¬m kiáº¿m:** Táº¡o index cho cÃ¡c cá»™t thÆ°á»ng dÃ¹ng trong `WHERE`, `JOIN`.
2. **Khi sáº¯p xáº¿p:** Táº¡o index cho cÃ¡c cá»™t dÃ¹ng trong `ORDER BY`.
3. **Khi káº¿t ná»‘i:** Táº¡o index trÃªn cÃ¡c cá»™t dÃ¹ng trong `JOIN`.
4. **Khi cáº§n unique:** Táº¡o unique index khi cáº§n Ä‘áº£m báº£o giÃ¡ trá»‹ duy nháº¥t.
5. **ChÃº Ã½:** Äá»«ng táº¡o quÃ¡ nhiá»u index, sáº½ lÃ m cháº­m cÃ¡c thao tÃ¡c ghi (INSERT, UPDATE, DELETE).

### **VI. CÃCH HOáº T Äá»˜NG Cá»¦A INDEX (NÃ“ HOáº T Äá»˜NG NHÆ¯ THáº¾ NÃ€O?)**

1. **Khi truy váº¥n:** SQL Server dÃ¹ng index Ä‘á»ƒ tÃ¬m dá»¯ liá»‡u nhanh hÆ¡n.
2. **`Index Seek`:** SQL Server truy cáº­p trá»±c tiáº¿p vÃ o cÃ¡c trang dá»¯ liá»‡u (tá»‘t nháº¥t).
3. **`Index Scan`:** SQL Server duyá»‡t qua index (cháº­m hÆ¡n `Index Seek`).
4. **`Key Lookup`:** Náº¿u index khÃ´ng cÃ³ Ä‘á»§ cá»™t, cáº§n lookup vÃ o báº£ng gá»‘c (cÃ³ thá»ƒ lÃ m cháº­m).

### **VII. LÆ¯U Ã QUAN TRá»ŒNG (Äá»‚ KHÃ”NG Bá»Š "SAI SÃ“T")**

- **Chá»n index phÃ¹ há»£p:** Chá»n Ä‘Ãºng cá»™t index (dÃ¹ng nhá»¯ng cá»™t thÆ°á»ng xuyÃªn dÃ¹ng Ä‘á»ƒ tÃ¬m kiáº¿m).
- **KhÃ´ng láº¡m dá»¥ng index:** QuÃ¡ nhiá»u index lÃ m cháº­m cÃ¡c thao tÃ¡c ghi (INSERT, UPDATE, DELETE).
- **Composite Index:** DÃ¹ng khi tÃ¬m kiáº¿m trÃªn nhiá»u cá»™t.
- **Unique Index:** DÃ¹ng khi cáº§n Ä‘áº£m báº£o giÃ¡ trá»‹ duy nháº¥t.
- **Tá»‘i Æ°u hÃ³a Query:** Viáº¿t cÃ¢u query tá»‘i Æ°u, trÃ¡nh `SELECT *`, ...
- **Theo dÃµi index:** ThÆ°á»ng xuyÃªn kiá»ƒm tra xem index cÃ³ cÃ²n hiá»‡u quáº£ khÃ´ng.
- **Include column:** Trong trÆ°á»ng há»£p cáº§n nhiá»u cá»™t, nhÆ°ng chá»‰ cÃ³ má»™t sá»‘ cá»™t thÆ°á»ng xuyÃªn Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ tÃ¬m kiáº¿m, ta cÃ³
  thá»ƒ dÃ¹ng include column Ä‘á»ƒ thÃªm cÃ¡c cá»™t cÃ²n láº¡i Ä‘á»ƒ trÃ¡nh `Key Lookup`, vÃ­ dá»¥
  `CREATE INDEX idx_order_customer on Orders (customerID) INCLUDE (orderDate, TotalAmount)`.
- **Filtered Index:** Ta cÃ³ thá»ƒ táº¡o index dá»±a trÃªn má»™t Ä‘iá»u kiá»‡n cá»¥ thá»ƒ, vÃ­ dá»¥ nhÆ° chá»‰ sá»‘ trÃªn cÃ¡c Ä‘Æ¡n hÃ ng cÃ³ tráº¡ng
  thÃ¡i lÃ  "Pending", Ä‘iá»u nÃ y sáº½ lÃ m chá»‰ má»¥c nháº¹ hÆ¡n vÃ  nhanh hÆ¡n cho cÃ¡c truy váº¥n chá»‰ tÃ¬m nhá»¯ng Ä‘Æ¡n hÃ ng cÃ³ tráº¡ng thÃ¡i
  nÃ y.

### **VIII. Káº¾T LUáº¬N (Tá»”NG Káº¾T)**

Index lÃ  "trá»£ thá»§ Ä‘áº¯c lá»±c" giÃºp báº¡n tÄƒng tá»‘c Ä‘á»™ truy váº¥n trong SQL Server. HÃ£y sá»­ dá»¥ng chÃºng má»™t cÃ¡ch thÃ´ng minh Ä‘á»ƒ cÃ³
Ä‘Æ°á»£c hiá»‡u suáº¥t tá»‘t nháº¥t cho á»©ng dá»¥ng cá»§a mÃ¬nh. ChÃºc cÃ¡c báº¡n code thÃ nh cÃ´ng! ğŸ˜

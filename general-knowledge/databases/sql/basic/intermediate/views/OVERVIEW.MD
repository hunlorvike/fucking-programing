## **üöÄ "GI·∫¢I M√É" VIEW TRONG SQL SERVER: "G√ìC NH√åN" D·ªÆ LI·ªÜU CHO D√ÇN CODE üöÄ**

Yo c√°c b·∫°n sinh vi√™n IT! H√¥m nay ch√∫ng ta s·∫Ω c√πng nhau "kh√°m ph√°" m·ªôt kh√°i ni·ªám r·∫•t quan tr·ªçng trong SQL Server: View (
khung nh√¨n). ƒê√¢y l√† m·ªôt c√¥ng c·ª• gi√∫p b·∫°n t·∫°o ra c√°c "g√≥c nh√¨n" t√πy ch·ªânh tr√™n d·ªØ li·ªáu, gi√∫p b·∫°n truy v·∫•n d·ªÖ d√†ng, b·∫£o
m·∫≠t t·ªët h∆°n. C√πng m√¨nh "m·ªï x·∫ª" n√≥ nh√©!

### **I. VIEW L√Ä G√å? (NH∆Ø "K√çNH L·ªåC" D·ªÆ LI·ªÜU)**

- **View (Khung nh√¨n):** L√† m·ªôt ƒë·ªëi t∆∞·ª£ng trong SQL Server, ƒë∆∞·ª£c t·∫°o ra t·ª´ m·ªôt c√¢u l·ªánh `SELECT` (th·ª±c ch·∫•t l√† m·ªôt truy
  v·∫•n).
- **N√≥ ho·∫°t ƒë·ªông nh∆∞ th·∫ø n√†o?**
    - Gi·ªëng nh∆∞ khi b·∫°n nh√¨n qua m·ªôt chi·∫øc k√≠nh: b·∫°n ch·ªâ th·∫•y nh·ªØng g√¨ b·∫°n mu·ªën th·∫•y (l·ªçc, s·∫Øp x·∫øp, ...).
- **Quan tr·ªçng v√¨:**
    - **ƒê∆°n gi·∫£n:** Gi√∫p truy v·∫•n ph·ª©c t·∫°p tr·ªü n√™n ƒë∆°n gi·∫£n h∆°n.
    - **B·∫£o m·∫≠t:** Che gi·∫•u m·ªôt s·ªë th√¥ng tin nh·∫°y c·∫£m.
    - **T√°i s·ª≠ d·ª•ng:** D√πng l·∫°i c√°c truy v·∫•n ph·ª©c t·∫°p nhi·ªÅu l·∫ßn.

### **II. C√ÅCH T·∫†O VIEW (C√ÅCH "L√ÄM K√çNH L·ªåC")**

```sql
CREATE VIEW view_name AS
SELECT column1, column2, ...
FROM table_name
WHERE condition;
```

- **`CREATE VIEW view_name AS`:** T·∫°o view v·ªõi t√™n `view_name`.
- **`SELECT column1, column2, ... FROM table_name`:** C√¢u truy v·∫•n ƒë·ªÉ t·∫°o view.
- **`WHERE condition`:** ƒêi·ªÅu ki·ªán l·ªçc d·ªØ li·ªáu (n·∫øu c·∫ßn).

### **III. V√ç D·ª§ MINH H·ªåA (XEM "TH·ª∞C H√ÄNH")**

#### **1. T·∫†O VIEW L·∫§Y TH√îNG TIN NH√ÇN VI√äN PH√íNG HR:**

```sql
CREATE VIEW HR_Employees AS
SELECT FirstName, LastName, Email, Salary
FROM Employees
WHERE Department = 'HR';
```

- **Gi·∫£i th√≠ch:** T·∫°o view `HR_Employees` ch·ª©a th√¥ng tin nh√¢n vi√™n ph√≤ng HR.
- **D√πng:**

```sql
SELECT * FROM HR_Employees;
```

#### **2. T·∫†O VIEW T√çNH L∆Ø∆†NG TRUNG B√åNH THEO PH√íNG BAN:**

```sql
CREATE VIEW DepartmentAvgSalary AS
SELECT Department, AVG(Salary) AS AvgSalary
FROM Employees
GROUP BY Department;
```

- **Gi·∫£i th√≠ch:** T·∫°o view `DepartmentAvgSalary` ch·ª©a l∆∞∆°ng trung b√¨nh c·ªßa c√°c ph√≤ng ban.
- **D√πng:**

```sql
SELECT * FROM DepartmentAvgSalary;
```

#### **3. T·∫†O VIEW D√ôNG JOIN:**

```sql
CREATE VIEW EmployeeDetails AS
SELECT e.FirstName, e.LastName, d.DepartmentName
FROM Employees AS e
INNER JOIN Departments AS d
ON e.DepartmentID = d.DepartmentID;
```

- **Gi·∫£i th√≠ch:** T·∫°o view `EmployeeDetails` ch·ª©a t√™n nh√¢n vi√™n v√† t√™n ph√≤ng ban.
- **D√πng:**

```sql
SELECT * FROM EmployeeDetails;
```

### **IV. C√ÅC LO·∫†I VIEW (NHI·ªÄU KI·ªÇU "K√çNH L·ªåC")**

1. **Simple View (View ƒë∆°n gi·∫£n):** D·ª±a tr√™n 1 b·∫£ng.
2. **Complex View (View ph·ª©c t·∫°p):** D·ª±a tr√™n nhi·ªÅu b·∫£ng (d√πng `JOIN`), ho·∫∑c d√πng h√†m g·ªôp nh√≥m.
3. **Materialized View (View v·∫≠t ch·∫•t h√≥a):** L∆∞u k·∫øt qu·∫£ c·ªßa query th√†nh b·∫£ng (√≠t d√πng trong SQL Server).

### **V. C√ÅC THAO T√ÅC V·ªöI VIEW (L√ÄM G√å V·ªöI "K√çNH L·ªåC"?)**

1. **`SELECT`:** D√πng ƒë·ªÉ l·∫•y d·ªØ li·ªáu t·ª´ view.

   ```sql
   SELECT * FROM HR_Employees;
   ```

2. **`UPDATE`:** C·∫≠p nh·∫≠t d·ªØ li·ªáu qua view (c√≥ gi·ªõi h·∫°n).

   ```sql
   UPDATE HR_Employees
   SET Salary = 6500
   WHERE FirstName = 'John';
   ```

3. **`INSERT`:** Ch√®n d·ªØ li·ªáu qua view (c√≥ gi·ªõi h·∫°n).

   ```sql
   INSERT INTO HR_Employees (FirstName, LastName, Email, Salary)
   VALUES ('New', 'User', 'newuser@example.com', 5000);
   ```

4. **`DELETE`:** X√≥a d·ªØ li·ªáu qua view (c√≥ gi·ªõi h·∫°n).

   ```sql
   DELETE FROM HR_Employees
   WHERE FirstName = 'John';
   ```

5. **`DROP`:** X√≥a view.

```sql
DROP VIEW HR_Employees;
```

### **VI. L∆ØU √ù QUAN TR·ªåNG (ƒê·ªÇ KH√îNG B·ªä "SAI S√ìT")**

- **View l√† query:** View kh√¥ng l∆∞u tr·ªØ d·ªØ li·ªáu th·ª±c, m√† ch·ªâ l∆∞u tr·ªØ query.
- **C·∫≠p nh·∫≠t c√≥ gi·ªõi h·∫°n:** Kh√¥ng ph·∫£i l√∫c n√†o c≈©ng c√≥ th·ªÉ `UPDATE`, `INSERT`, `DELETE` qua view.
- **Kh√¥ng d√πng `ORDER BY` trong view:** (tr·ª´ khi d√πng `TOP`, `OFFSET`).
- **T√™n r√µ r√†ng:** ƒê·∫∑t t√™n view r√µ r√†ng, d·ªÖ hi·ªÉu.
- **T√†i li·ªáu h√≥a:** Vi·∫øt comment ho·∫∑c t√†i li·ªáu cho c√°c view quan tr·ªçng.

### **VII. ·ª®NG D·ª§NG (ƒê∆Ø·ª¢C D√ôNG ·ªû ƒê√ÇU?)**

- **ƒê∆°n gi·∫£n h√≥a query:** D√πng l·∫°i c√°c query ph·ª©c t·∫°p.
- **B·∫£o m·∫≠t:** Che gi·∫•u th√¥ng tin nh·∫°y c·∫£m.
- **T√°i c·∫•u tr√∫c:** D·ªÖ thay ƒë·ªïi c·∫•u tr√∫c b·∫£ng m√† kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn c√°c query.

### **VIII. K·∫æT LU·∫¨N (T·ªîNG K·∫æT)**

View l√† m·ªôt c√¥ng c·ª• r·∫•t h·ªØu √≠ch gi√∫p b·∫°n qu·∫£n l√Ω v√† truy v·∫•n d·ªØ li·ªáu m·ªôt c√°ch hi·ªáu qu·∫£. Hy v·ªçng qua b√†i vi·∫øt n√†y, c√°c
b·∫°n ƒë√£ hi·ªÉu r√µ h∆°n v·ªÅ n√≥ v√† c√≥ th·ªÉ √°p d·ª•ng v√†o c√¥ng vi·ªác h√†ng ng√†y c·ªßa m√¨nh. Ch√∫c c√°c b·∫°n code th√†nh c√¥ng! üòé
